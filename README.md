# Chili Room Editor

Simple, local-only web app to:

1. Upload a 128xH PNG tileset (width 128, height <= 128)
2. Slice it into tiles (fixed at 8x8)
3. Paint a 16x16 tile map with 2 layers
4. Export the map as JSON, PNG, C array, or .h file

Built with Svelte and Pixi.js for smooth rendering. All data (tileset + map) is stored in `localStorage`.

## Features

- 128xH (H <= 128) PNG tileset upload (validated)
- Auto-sliced tile palette with pixelated rendering
- Click to select a tile as the active brush
- 16x16 map grid (stores tile indices; -1 = empty) displayed at 32px per logical tile for crisp editing
- 2 layers: paint on separate layers, view combined
- Erase mode toggle
- Persistent state (reload page and continue where you left off)
- Export to JSON, PNG, C array (copy or download `.h` file)

## Usage

1. Install dependencies: `npm install`
2. Run dev server: `npm run dev`
3. Open http://localhost:5173 (or the port shown)
4. Upload your 128xH PNG tileset (e.g., 128x80 works)
5. Click a tile in the palette to make it the brush
6. Select a layer to edit
7. Paint on the map canvas (left click / drag)
8. Toggle Erase mode to remove tiles
9. Export when ready

## Export Format

JSON export includes tileset dataURL, layers, bg color, etc.

C array example:

```c
// Generated by Chili Room Editor
#define ROOM_W 16
#define ROOM_H 16
#define LAYER_COUNT 2
#define ROOM_BG_COLOR 0x111111
static const int roomMap_L0[ROOM_W*ROOM_H] = {
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  -1, -1, -1, -1, ...
  // ... remaining rows ...
};
static const int roomMap_L1[ROOM_W*ROOM_H] = { ... };
```

Tile indices correspond to the order tiles are sliced (row-major from the uploaded tileset). Empty cells are `-1`.

## Display Scaling

Each logical tile is rendered at 32px square in the editor for clarity. Exported data only contains tile indices; no scale metadata is added.

## Development

- Built with Svelte 4, Vite, Pixi.js 7
- Run `npm run build` for production build
- Run `npm run preview` to preview build

## Deployment

This project is configured for automatic deployment to GitHub Pages with a custom domain.

1. Push your changes to the `main` branch
2. The GitHub Actions workflow will automatically build and deploy
3. The site is available at `https://map-editor.chilichip.eu/`

The GitHub Actions workflow will automatically build and deploy your changes when you push to main.

## Reset / Clearing

- Use Clear Current Layer to set a layer to -1
- Use Clear Tileset to remove the tileset and palette
- Use browser devtools > Application > Local Storage to manually purge

## Browser Compatibility

Tested in recent Chromium + Firefox. Mobile works for basic painting (touch events), but UI is not optimized.

## License

See `LICENSE`.
